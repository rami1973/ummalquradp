<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>umm dates</title>
    <link rel="stylesheet" href="css/jquery.calendars.picker.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    
    <script type="text/javascript" src="js/jquery.calendars.js"></script>
    <script type="text/javascript" src="js/jquery.calendars.plus.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery.calendars.picker.css"> 
<script type="text/javascript" src="js/jquery.plugin.js"></script> 
<script type="text/javascript" src="js/jquery.calendars.picker.js"></script>
<script type="text/javascript" src="js/jquery.calendars.ummalqura.js"></script>

    <script type="text/javascript">
      function m2u(var_m, var_u) {
              var date_in = $('#' + var_m).val();
              d_y = date_in.substring(0, 4);
              d_m = date_in.substring(5, 7);
              d_d = date_in.substring(8, 10);
              var gc = $.calendars.instance();
              var jd = gc.newDate(
                  parseInt(d_y),
                  parseInt(d_m),
                  parseInt(d_d)).toJD();
              var hc = $.calendars.instance('ummalqura').fromJD(jd);
              hd_y = String(hc.formatYear());
              hd_m = String(hc.month());
              hd_d = String(hc.day());
              hd_d = (hd_d.length < 2) ? '0' + hd_d : hd_d;
              hd_m = (hd_m.length < 2) ? '0' + hd_m : hd_m;
              $('#' + var_u).val(hd_y + '-' + hd_m + '-' + hd_d);
              //sp_dt( var_u);
  
          }
          function u2m(var_u, var_m) {
  
  var date_in = $('#' + var_u).val();
  d_y = date_in.substring(0, 4);
  d_m = date_in.substring(5, 7);
  d_d = date_in.substring(8, 10);
  var gc = $.calendars.instance('ummalqura');
  var jd = gc.newDate(
      parseInt(d_y),
      parseInt(d_m),
      parseInt(d_d)).toJD();
  var hc = $.calendars.instance().fromJD(jd);
  hd_y = String(hc.formatYear());
  hd_m = String(hc.month());
  hd_d = String(hc.day());
  hd_d = (hd_d.length < 2) ? '0' + hd_d : hd_d;
  hd_m = (hd_m.length < 2) ? '0' + hd_m : hd_m;
  $('#' + var_m).val(hd_y + '-' + hd_m + '-' + hd_d);
             // sp_dt( var_m);

}

        $(document).ready(function(){
           
            ////
            $("#d1_dt_g").calendarsPicker({dateFormat:'yyyy-mm-dd'});

            $("#d1_dt_h").calendarsPicker({calendar: $.calendars.instance('ummalqura'),dateFormat:'yyyy-mm-dd'});
            $('.dtpg').change(function(e){
                var idTag = $( this ).get( 0 ).id.slice(   0,-1);
                var var_m=idTag+"g";
                var var_u=idTag+"h";
                
                console.log('dtp g change: '+idTag);
                m2u(var_m, var_u);
            });
            $('.dtph').change(function(e){
                var idTag = $( this ).get( 0 ).id.slice(   0,-1);
                var var_m=idTag+"g";
                var var_u=idTag+"h";
                
                console.log('dtp h change');
                u2m(var_u, var_m);
            });

        })
    </script>
</head>
<body>
    greg <input type="text" id="d1_dt_g"  name="datetime" class="dtpg"> <br>
    Hijri <input type="text" id="d1_dt_h"  name="datetime" class="dtph">

</body>
</html>